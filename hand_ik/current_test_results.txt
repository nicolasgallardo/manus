======================================== Running Tests... ======================================== Running Passive Coupling Validation... === Passive Coupling Validation - Multiple Models === Comparing measured data with different polynomial models ### Original Broken Model ### === Testing Original Broken Model === Coefficients (radians domain): a (cubic): 0.000216421 b (quadratic): 0 c (linear): 0.0108559 d (constant): 0.0524035 MCP(deg)Measured(deg)Computed(deg) Error(deg) Error(%) ------------------------------------------------------------ 0.0 0.0 3.0 3.00 0.0% 5.0 10.1 3.1 7.04 69.7% 10.0 11.7 3.1 8.59 73.4% 15.0 14.8 3.2 11.63 78.6% 20.0 19.0 3.2 15.78 83.1% 25.0 24.1 3.3 20.88 86.4% 30.0 30.0 3.3 26.67 88.9% 35.0 36.4 3.4 32.96 90.7% 40.0 42.9 3.4 39.46 92.0% 45.0 49.6 3.5 46.10 92.9% 50.0 56.3 3.6 52.72 93.7% 55.0 62.8 3.6 59.19 94.3% 60.0 69.3 3.7 65.63 94.7% 65.0 75.6 3.7 71.87 95.1% 70.0 81.8 3.8 78.01 95.4% 75.0 87.8 3.8 83.96 95.6% 80.0 93.8 3.9 89.90 95.8% 85.0 99.7 4.0 95.73 96.0% 90.0 105.6 4.0 101.57 96.2% ------------------------------------------------------------ Error Statistics: Average absolute error: 47.93 degrees Maximum absolute error: 101.57 degrees Average relative error: 84.9% Acceptance Criteria: Avg error < 2.0░: FAIL (47.9░) Max error < 5.0░: FAIL (101.6░) Overall: FAIL ### Quadratic Model in Degrees (Recommended) ### === Testing Quadratic in Degrees === Coefficients (degrees domain): a (cubic): 0.0 b (quadratic): 0.0 c (linear): 1.0 d (constant): 0.7 MCP(deg)Measured(deg)Computed(deg) Error(deg) Error(%) ------------------------------------------------------------ 0.0 0.0 0.7 0.74 0.0% 5.0 10.1 5.7 4.44 44.0% 10.0 11.7 10.7 1.00 8.6% 15.0 14.8 15.9 1.06 7.2% 20.0 19.0 21.1 2.14 11.2% 25.0 24.1 26.5 2.39 9.9% 30.0 30.0 32.1 2.05 6.8% 35.0 36.4 37.7 1.34 3.7% 40.0 42.9 43.4 0.55 1.3% 45.0 49.6 49.3 0.27 0.6% 50.0 56.3 55.3 0.95 1.7% 55.0 62.8 61.4 1.36 2.2% 60.0 69.3 67.7 1.63 2.3% 65.0 75.6 74.0 1.57 2.1% 70.0 81.8 80.5 1.30 1.6% 75.0 87.8 87.1 0.70 0.8% 80.0 93.8 93.8 0.01 0.0% 85.0 99.7 100.6 0.95 0.9% 90.0 105.6 107.6 2.00 1.9% ------------------------------------------------------------ Error Statistics: Average absolute error: 1.39 degrees Maximum absolute error: 4.44 degrees Average relative error: 5.6% Acceptance Criteria: Avg error < 2.0░: PASS (1.4░) Max error < 5.0░: PASS (4.4░) Overall: PASS ### Quadratic Model Converted to Radians ### === Testing Quadratic in Radians === Coefficients (radians domain): a (cubic): 0.0 b (quadratic): 0.1 c (linear): 1.0 d (constant): 0.0 MCP(deg)Measured(deg)Computed(deg) Error(deg) Error(%) ------------------------------------------------------------ 0.0 0.0 0.7 0.74 0.0% 5.0 10.1 5.7 4.44 44.0% 10.0 11.7 10.7 1.00 8.6% 15.0 14.8 15.9 1.06 7.2% 20.0 19.0 21.1 2.14 11.2% 25.0 24.1 26.5 2.39 9.9% 30.0 30.0 32.1 2.05 6.8% 35.0 36.4 37.7 1.34 3.7% 40.0 42.9 43.4 0.55 1.3% 45.0 49.6 49.3 0.27 0.6% 50.0 56.3 55.3 0.95 1.7% 55.0 62.8 61.4 1.36 2.2% 60.0 69.3 67.7 1.63 2.3% 65.0 75.6 74.0 1.57 2.1% 70.0 81.8 80.5 1.30 1.6% 75.0 87.8 87.1 0.70 0.8% 80.0 93.8 93.8 0.01 0.0% 85.0 99.7 100.6 0.95 0.9% 90.0 105.6 107.6 2.00 1.9% ------------------------------------------------------------ Error Statistics: Average absolute error: 1.39 degrees Maximum absolute error: 4.44 degrees Average relative error: 5.6% Acceptance Criteria: Avg error < 2.0░: PASS (1.4░) Max error < 5.0░: PASS (4.4░) Overall: PASS ### Cubic Model in Degrees (for completeness) ### === Testing Cubic in Degrees === Coefficients (degrees domain): a (cubic): 0.0 b (quadratic): 0.0 c (linear): 1.0 d (constant): 0.7 MCP(deg)Measured(deg)Computed(deg) Error(deg) Error(%) ------------------------------------------------------------ 0.0 0.0 0.7 0.74 0.0% 5.0 10.1 5.9 4.20 41.6% 10.0 11.7 12.9 1.16 9.9% 15.0 14.8 23.4 8.62 58.2% 20.0 19.0 39.4 20.38 107.3% 25.0 24.1 62.5 38.39 159.0% 30.0 30.0 94.7 64.70 215.7% 35.0 36.4 137.7 101.31 278.7% 40.0 42.9 193.2 150.32 350.4% 45.0 49.6 263.2 213.58 430.6% 50.0 56.3 349.3 293.07 520.8% 55.0 62.8 453.5 390.70 622.1% 60.0 69.3 577.5 508.16 733.3% 65.0 75.6 723.0 647.42 856.4% 70.0 81.8 892.0 810.18 990.4% 75.0 87.8 1086.1 998.34 1137.1% 80.0 93.8 1307.3 1213.50 1293.7% 85.0 99.7 1557.3 1457.56 1461.9% 90.0 105.6 1837.8 1732.22 1640.4% ------------------------------------------------------------ Error Statistics: Average absolute error: 455.50 degrees Maximum absolute error: 1732.22 degrees Average relative error: 574.1% Acceptance Criteria: Avg error < 2.0░: FAIL (455.5░) Max error < 5.0░: FAIL (1732.2░) Overall: FAIL === Summary and Recommendations === 1. The original implementation had multiple unit conversion errors. 2. A quadratic model fits the data much better than a cubic model. 3. Working in degrees avoids unit conversion pitfalls. 4. Recommended coefficients for degrees domain: y_deg = 0.00239207*x_deg^2 + 0.97203665*x_deg + 0.73983459 5. If radians are required, use the correctly converted coefficients shown above. === Unit Conversion Formula Reference === For polynomial y_deg = ?*x_deg^2 + ?*x_deg + ? To get y_rad = a*x_rad^3 + b*x_rad^2 + c*x_rad + d: a = 0 (no cubic term) b = ?*(180/?) c = ? d = ?*(?/180) Running Jacobian test... === Jacobian Finite Difference Test (Corrected Coefficients) === Using corrected passive coupling coefficients: Radian-domain model: q_distal = 0.137056*q_mcp^2 + 0.972037*q_mcp + 0.0129125 Using URDF: build\bin\Release\surge_v13_hand_right_pybullet.urdf HandIK initialized with 10 configuration variables Active parameters: 6 Model nv (velocity): 10 Testing Jacobian computation... --- Test 1: Zero Configuration --- Testing Jacobian at configuration: 0 0 0 0 0 0 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0674378 Jacobian test result: FAIL --- Test 2: Random Configuration 0 --- Testing Jacobian at configuration: 0 0 0 0 0 0 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0674378 Jacobian test result: FAIL --- Test 3: Random Configuration 1 --- Testing Jacobian at configuration: 0.303246 0 0.426808 0.0124307 0 0 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0678883 Jacobian test result: FAIL --- Test 4: Random Configuration 2 --- Testing Jacobian at configuration: 0.296123 0 0 0 0.244274 0 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.067942 Jacobian test result: FAIL --- Test 5: Random Configuration 3 --- Testing Jacobian at configuration: 0.276923 0.291427 0.255174 0 0 0 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0683645 Jacobian test result: FAIL --- Test 6: Random Configuration 4 --- Testing Jacobian at configuration: 0 0.478303 0.454936 0.381261 0.27861 0 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0671133 Jacobian test result: FAIL --- Test 7: Joint Limit Boundaries --- Testing Jacobian at configuration: 1.764 1.764 1.764 1.764 1.764 1.764 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0685742 Jacobian test result: FAIL --- Test 8: Lower Limit Boundaries --- Testing Jacobian at configuration: 0.01 0.01 0.01 0.01 0.01 0.01 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.0675577 Jacobian test result: FAIL --- Test 9: Passive Coupling Verification --- Testing with passive coupling verification... Finger 0: MCP=28.6░ ? DIP=30.5░ Finger 1: MCP=17.2░ ? DIP=18.2░ Finger 2: MCP=40.1░ ? DIP=43.6░ Finger 3: MCP=11.5░ ? DIP=12.2░ Testing Jacobian at configuration: 0.5 0.3 0.7 0.2 0.4 0.6 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 FK: qfull size=10, model.nq=10, model.nv=10 Jacobian FD check: max error = 0.1 Jacobian test result: FAIL === Final Results === All Jacobian tests passed: NO Some Jacobian tests failed! Running Reachability test... === Hand IK Reachability Test Suite (Corrected Coefficients) === [URDF] Resolved path: build\bin\Release\surge_v13_hand_right_pybullet.urdf [model] nq=10 nv=10 [coeffs] q_distal = 0.137056*q_mcp^2 + 0.972037*q_mcp + 0.0129125 (radians) --- Test 1: Basic Reachability (Small Noise) --- Running 50 reachability tests... Noise scale: 0.05 Position tolerance: 0.001 m Orientation tolerance: 0.01 rad Test 1/50 - Success rate: 0% Test 10/50 - Success rate: 0% Test 20/50 - Success rate: 0% Test 30/50 - Success rate: 0% Test 40/50 - Success rate: 0% Test 50/50 - Success rate: 0% === Reachability Test Results === Total tests: 50 Successful tests: 0 (0%) Converged tests: 0 (0%) Within tolerance: 1 (2%) === Timing Statistics === Average solve time: 0.17312 ms Maximum solve time: 0.338 ms === Iteration Statistics === Average iterations: 10.98 Maximum iterations: 11 === Error Statistics === Average final error: 0.0131807 Maximum final error: 0.0213844 === Test Result === Required success rate: 80% Achieved success rate: 0% Test result: FAIL --- Test 2: Medium Noise Robustness --- Running 30 reachability tests... Noise scale: 0.15 Position tolerance: 0.001 m Orientation tolerance: 0.01 rad Test 1/30 - Success rate: 0% Test 10/30 - Success rate: 0% Test 20/30 - Success rate: 0% Test 30/30 - Success rate: 0% === Reachability Test Results === Total tests: 30 Successful tests: 0 (0%) Converged tests: 0 (0%) Within tolerance: 0 (0%) === Timing Statistics === Average solve time: 0.1099 ms Maximum solve time: 0.158 ms === Iteration Statistics === Average iterations: 11.6 Maximum iterations: 12 === Error Statistics === Average final error: 0.0360471 Maximum final error: 0.0584112 === Test Result === Required success rate: 80% Achieved success rate: 0% Test result: FAIL --- Test 3: Large Noise Robustness --- Running 20 reachability tests... Noise scale: 0.3 Position tolerance: 0.001 m Orientation tolerance: 0.01 rad Test 1/20 - Success rate: 0% Test 10/20 - Success rate: 0% Test 20/20 - Success rate: 0% === Reachability Test Results === Total tests: 20 Successful tests: 0 (0%) Converged tests: 0 (0%) Within tolerance: 0 (0%) === Timing Statistics === Average solve time: 0.1154 ms Maximum solve time: 0.143 ms === Iteration Statistics === Average iterations: 11.8 Maximum iterations: 12 === Error Statistics === Average final error: 0.0591893 Maximum final error: 0.0978775 === Test Result === Required success rate: 80% Achieved success rate: 0% Test result: FAIL Large noise test (informational): FAIL --- Test 4: Out-of-Plane Target Handling --- === Out-of-Plane Target Handling Test === Testing with out-of-plane target (5cm offset)... Solve succeeded: NO Iterations: 11 Final error: 0.0279125 Out-of-plane detected for finger 0: 0.0786818 m Out-of-plane detected for finger 1: 0.0325751 m Out-of-plane detected for finger 2: 0.03429 m Out-of-plane detected for finger 3: 0.03429 m Out-of-plane test result: FAIL --- Test 5: Performance Benchmark --- Running 100 reachability tests... Noise scale: 0.1 Position tolerance: 0.001 m Orientation tolerance: 0.01 rad Test 1/100 - Success rate: 0% Test 10/100 - Success rate: 0% Test 20/100 - Success rate: 0% Test 30/100 - Success rate: 0% Test 40/100 - Success rate: 0% Test 50/100 - Success rate: 0% Test 60/100 - Success rate: 0% Test 70/100 - Success rate: 0% Test 80/100 - Success rate: 0% Test 90/100 - Success rate: 0% Test 100/100 - Success rate: 0% === Reachability Test Results === Total tests: 100 Successful tests: 0 (0%) Converged tests: 0 (0%) Within tolerance: 0 (0%) === Timing Statistics === Average solve time: 0.18775 ms Maximum solve time: 0.386 ms === Iteration Statistics === Average iterations: 11.2 Maximum iterations: 12 === Error Statistics === Average final error: 0.0230967 Maximum final error: 0.040108 === Test Result === Required success rate: 80% Achieved success rate: 0% Test result: FAIL Total time for 100 tests: 233 ms Average time per test: 2.33 ms === Final Test Results === All critical tests passed: NO Some reachability tests failed!